const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BRNBnEkG.js","./uNxs39UM.js","./D-Ig_pZi.js"])))=>i.map(i=>d[i]);
import{_ as k}from"./BJqAaxRj.js";import{B as _,D as $,g as c,w,j as d,f as g,h as x,t as f,F as b,E as S,_ as N,G as C,H as E,c as v,I as B,J as m}from"./uNxs39UM.js";import{u as A}from"./wsONIQJP.js";import{u as D}from"./BqSfMNXe.js";import{t as T}from"./D-Ig_pZi.js";const I=["src","alt"],O={class:"p-6"},L={key:0,class:"text-sm text-gray-500 mb-2"},j={class:"text-xl font-semibold mb-3 text-emerald-700 group-hover:text-green-600 transition-colors"},z={class:"text-gray-600 text-sm mb-4 line-clamp-3"},F={key:1,class:"mb-4"},R=_({__name:"BlogCard",props:{title:String,description:String,image:String,date:String,slug:String,tags:Array},setup(s){return(i,e)=>{const n=k;return c(),$(n,{to:s.slug,class:"block bg-white rounded-xl border border-gray-200 overflow-hidden group flat-card-hover transition-all duration-300"},{default:w(()=>[d("img",{src:s.image,alt:s.title,class:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300",onerror:"this.onerror=null;this.src='https://placehold.co/600x400/cccccc/ffffff?text=Obrázek+není+dostupný';"},null,8,I),d("div",O,[s.date?(c(),g("p",L,f(s.date),1)):x("",!0),d("h3",j,f(s.title),1),d("p",z,f(s.description),1),s.tags&&s.tags.length?(c(),g("div",F,[(c(!0),g(b,null,S(s.tags,o=>(c(),g("span",{key:o,class:"inline-block bg-green-100 text-green-700 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full"},f(o),1))),128))])):x("",!0),e[0]||(e[0]=d("span",{class:"text-green-600 font-semibold group-hover:underline"},"Číst více →",-1))])]),_:1},8,["to"])}}}),U=N(R,[["__scopeId","data-v-10c568de"]]),p=(s,i)=>{const e=s._conditions;return e.length>0?`(${e.join(` ${i} `)})`:""},y=s=>{const i=[],e={_conditions:i,where(n,o,t){let r;switch(o.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(t)){const l=t.map(a=>h(a)).join(", ");r=`"${String(n)}" ${o.toUpperCase()} (${l})`}else throw new TypeError(`Value for ${o} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(t)&&t.length===2)r=`"${String(n)}" ${o.toUpperCase()} ${h(t[0])} AND ${h(t[1])}`;else throw new Error(`Value for ${o} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":r=`"${String(n)}" ${o.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":r=`"${String(n)}" ${o.toUpperCase()} ${h(t)}`;break;default:r=`"${String(n)}" ${o} ${h(typeof t=="boolean"?Number(t):t)}`}return i.push(`${r}`),e},andWhere(n){const o=n(y());return i.push(p(o,"AND")),e},orWhere(n){const o=n(y());return i.push(p(o,"OR")),e}};return e},W=(s,i)=>{const e={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},n={__params:e,andWhere(t){const r=t(y());return e.conditions.push(p(r,"AND")),n},orWhere(t){const r=t(y());return e.conditions.push(p(r,"OR")),n},path(t){return n.where("path","=",C(t))},skip(t){return e.offset=t,n},where(t,r,l){return n.andWhere(a=>a.where(String(t),r,l)),n},limit(t){return e.limit=t,n},select(...t){return t.length&&e.selectedFields.push(...t),n},order(t,r){return e.orderBy.push(`"${String(t)}" ${r}`),n},async all(){return i(s,o()).then(t=>t||[])},async first(){return i(s,o({limit:1})).then(t=>t[0]||null)},async count(t="*",r=!1){return i(s,o({count:{field:String(t),distinct:r}})).then(l=>l[0].count)}};function o(t={}){let r="SELECT ";if(t!=null&&t.count)r+=`COUNT(${t.count.distinct?"DISTINCT ":""}${t.count.field}) as count`;else{const a=Array.from(new Set(e.selectedFields));r+=a.length>0?a.map(u=>`"${String(u)}"`).join(", "):"*"}r+=` FROM ${T[String(s)]}`,e.conditions.length>0&&(r+=` WHERE ${e.conditions.join(" AND ")}`),e.orderBy.length>0?r+=` ORDER BY ${e.orderBy.join(", ")}`:r+=" ORDER BY stem ASC";const l=(t==null?void 0:t.limit)||e.limit;return l>0&&(e.offset>0?r+=` LIMIT ${l} OFFSET ${e.offset}`:r+=` LIMIT ${l}`),r}return n};function h(s){return`'${String(s).replace(/'/g,"''")}'`}const q=s=>{var e,n;const i=(n=(e=E())==null?void 0:e.ssrContext)==null?void 0:n.event;return W(s,(o,t)=>Q(i,o,t))};async function Q(s,i,e){return V(i,e)}async function V(s,i){return await v(()=>import("./BRNBnEkG.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(n=>n.loadDatabaseAdapter(s)).then(n=>n.all(i))}const P={class:"section-padding"},G={class:"container mx-auto px-6"},H={key:0,class:"text-center"},M={key:1,class:"text-center"},Z={key:2,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-8"},et=_({__name:"index",async setup(s){let i,e;A({title:"Blog - Agdata",meta:[{name:"description",content:"Přečtěte si nejnovější články a novinky ze světa Agdata a moderního zemědělství."}]});const{data:n,pending:o,error:t}=([i,e]=B(()=>D("articles",()=>q("blog").where("_draft","=",!1).order("date","DESC").all())),i=await i,e(),i);console.log("------- articles",n.value,t.value);const r=l=>{if(!l)return"Neznámé datum";const a={year:"numeric",month:"long",day:"numeric"};return new Date(l).toLocaleDateString("cs-CZ",a)};return(l,a)=>(c(),g("div",P,[d("div",G,[a[2]||(a[2]=d("h1",{class:"text-4xl md:text-5xl font-bold text-center mb-12 text-emerald-700"},"Náš Blog",-1)),m(o)?(c(),g("div",H,a[0]||(a[0]=[d("p",null,"Načítání článků...",-1)]))):m(t)||!m(n)||m(n).length===0?(c(),g("div",M,a[1]||(a[1]=[d("p",{class:"text-xl text-gray-600"},"Zatím zde nejsou žádné články. Zkuste to prosím později.",-1)]))):(c(),g("div",Z,[(c(!0),g(b,null,S(m(n),u=>(c(),$(U,{key:u._path,title:u.title||"Bez názvu",description:u.description||"Popis není k dispozici.",image:u.image||"https://placehold.co/600x400/A7F3D0/047857?text=Blogový+Obrázek&font=inter",date:r(u.date),slug:u._path||"/blog",tags:u.tags},null,8,["title","description","image","date","slug","tags"]))),128))]))])]))}});export{et as default};
